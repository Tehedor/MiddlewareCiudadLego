FROM node:20.14.0

ENV WEB_APP_PORT=3030
ENV DUMMY_DEVICES_PORT=3001

ENV DEVICE_NUMBER=001

ENV INTENSITY_THRESHOLD=70

ENV INICIAL_STATE=true
ENV TIME_INTERVAL=250

ENV SIMULATE_PIR_SENSOR=true
ENV SIMULATE_PHOTORESISTOR_SENSOR=true
ENV SIMULATE_POTENTIOMETER_SENSOR=false
ENV SIMULATE_INFRARED_SENSOR=false
ENV SIMULATE_SWITCH_SENSOR=false
ENV SIMULATE_RFID_SENSOR=false
ENV SIMULATE_ULTRASOUND_SENSOR=false
ENV SIMULATE_WEATHER_STATION=false

ENV TIMER_PIR_SENSOR=2000
ENV TIMER_PHOTORESISTOR_SENSOR=10000
ENV TIMER_POTENTIOMETER_SENSOR=20000
ENV TIMER_INFRARED_SENSOR=3000
ENV TIMER_SWITCH_SENSOR=50000
ENV TIMER_RFID_SENSOR=20000
ENV TIMER_ULTRASOUND_SENSOR=20000
ENV TIMER_WEATHER_STATION=600000

ENV MODE_CONTAINERS=false


# Clave api de openweather
ENV WEATHER_API_KEY=d9cde8b16d65f14446e43bd0c7e7dffd

WORKDIR /opt

COPY app ./app

WORKDIR /opt/app

RUN npm install

CMD ["npm", "start"]
# CMD ["npm", "run", "debug"]

EXPOSE 3030
EXPOSE 3001